# UNION vs UNION ALL
## UNION
- 두 개 이상 쿼리 결과의 합집합
- UNION은 결과 집합의 **레코드** 확장
    - 인덱스 최적화가 잘되어있어도 임시테이블을 사용한 가공 작업이 필요함
    - 임시테이블 사용 작업을 피할 수 있도록 튜닝이 가능함!
- JOIN은 결과 집합의 **컬럼** 확장

## UNION ALL vs UNION DISTINCT
- 두 집합의 중복 제거 여부
    - UNION ALL은 중복 허용
    - DISTINCT는 허용하지 않음
        - 추가적인 중복 제거 작업이 동반됨


## UNION DISTINCT
- MySQL 서버의 중복제거 방법
    1. UNION 결과 저장을 위한 임시테이블 구성
    2. 결과집합 A, B, C 등에 대해 모두 루프를 돌며 임시테이블에 해당 값이 존재하는지 / 하지않는지 확인
    3. 존재 여부에 따라 INSERT or DROP
    4. 모든 연산 종료 후 임시테이블에 있는 값을 읽어 클라이언트에 전달
- 레코드의 중복 여부는 PK / UK가 아닌 레코드의 **모든 컬럼 값 조합으로 중복 여부를 확인**함
    - 결과 집합의 값이 가공되었을수도 있고, 출처가 다른 테이블일 수 있기 때문

### UNION DISTINCT의 성능?
- UNION ALL과 비교해 매우 느린 퍼포먼스
    - 가능하면 UNION ALL을 사용하는 것이 좋음
    - 중복 제거 작업은 애플리케이션 서버에서 해도 무방함

### 주의
`UNION` 키워드만 사용 시, 기본적으로 `UNION DISTINCT`가 사용됨!
- 중복제거 필요 여부를 확인 후 `ALL`을 명시해주는 것이 필요함!

### UNION ALL의 장점
- UNION DISTINCT
    - 임시테이블을 사용하여 중복제거 후 결과 반환함
    - MySQL 서버는 모든 결과를 임시테이블로 처리 후 클라이언트에 결과값 반환
- UNION ALL
    - 임시 테이블 사용 과정 없음
    - MySQL 서버는 데이터 파일 결과를 읽어 즉시 클라이언트에 반환
    - DISTINCT 사용 시와 비교해 메모리와 CPU 사용량인 낮고 빠른 결과 반환함